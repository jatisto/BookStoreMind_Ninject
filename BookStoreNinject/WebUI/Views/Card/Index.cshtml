@model WebUI.Controllers.CardIndexVM

@{
    ViewBag.Title = "BookStoreNinject: Ваша корзина";
}

<h2>@ViewBag.Title</h2>

<style>

    #cardTable td { vertical-align: middle; }

</style>

<table id="cardTable" class="table">
    <thead>
    <tr>
        <th>Количество</th>
        <th>Наименование</th>
        <th class="text-right">Цена</th>
        <th class="text-right">Сумма</th>
    </tr>
    </thead>
    <tbody>
    @foreach (var line in Model.Card.Lines)
    {
        <tr>
            <td class="text-center">@line.Quantity</td>
            <td class="text-left">@line.Book.Name - @line.Book.Author</td>
            <td class="text-right">@line.Book.Price.ToString("# руб")</td>
            <td class="text-right">@((line.Quantity * line.Book.Price).ToString("# руб"))</td>
            <td>
                @using (@Html.BeginForm("RemoveFormCard", "Card"))
                {
                    @Html.Hidden("BookId", line.Book.BookId)
                    @Html.HiddenFor(x => x.ReturnUrl)
                    <input type="submit" class="btn btn-sm btn-warning" value="Удалить"/>
                }
            </td>
        </tr>
    }
    </tbody>
    <tfoot>
    <tr>
        <td colspan="3" class="text-right">Итого:</td>
        <td class="text-right">@Model.Card.ComputeTotalValue().ToString("# руб")</td>
    </tr>
    </tfoot>
</table>

<div class="text-center">
    <a class="btn btn-primary" href="@Model.ReturnUrl">Продолжить покупки</a>
</div>